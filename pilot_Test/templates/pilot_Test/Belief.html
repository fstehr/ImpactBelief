{% extends "global/Page.html" %}
{% load otree %}

{% block styles %}
    <link href="{% static 'global/css/global.css' %}" rel="stylesheet">
    <style>
        table {
            border-collapse: separate;
            border-spacing: 22px;
        }
    </style>
{% endblock %}

{% block scripts %}
    <script>
        let Intro = js_vars.sec_intro * 1000;
        let Delay = js_vars.sec_per_matrix * 1000;

        function HideImageLoadForm() {
            setTimeout(function(){
                document.getElementById('alert').style.display="none"
                document.getElementById('matrix1_white').style.display="none"
                document.getElementById('matrix1').style.display="block"
            },Intro);
            setTimeout(function(){
                document.getElementById('matrix1').style.display="none"
                document.getElementById('matrix1_white').style.display="block"
                document.getElementById("num_x_belief_A").disabled = true;
            }, Delay+Intro);
        }

        document.getElementById("num_x_belief_B").disabled = true;
        document.getElementById("num_x_belief_min_B").disabled = true;
        document.getElementById("num_x_belief_max_B").disabled = true;

        /* dynamically changing the minimum values for the form fields A */
        document.getElementById("num_x_belief_A").onchange = function () {
            /* maximum of minA must be < belief */
            var input = document.getElementById("num_x_belief_min_A");
            input.setAttribute("max", this.value);
            /* minimum of maxA must be > belief */
            var input2 = document.getElementById("num_x_belief_max_A");
            input2.setAttribute("min", this.value);
        }
        /* dynamically changing the minimum values for the form fields B */
        document.getElementById("num_x_belief_B").onchange = function () {
            /* maximum of minA must be < belief */
            var input = document.getElementById("num_x_belief_min_B");
            input.setAttribute("max", this.value);
            /* minimum of maxA must be > belief */
            var input2 = document.getElementById("num_x_belief_max_B");
            input2.setAttribute("min", this.value);
        }
    </script>
{% endblock %}


{% block title %}
    Your estimates
{% endblock %}

{% block content %}

    <body onload="HideImageLoadForm();" onkeydown="return (event.keyCode != 116)">

        <div class="alert alert-danger" id="alert" style="text-align: center;display:block;margin-left:auto; margin-right:auto; width:70%;">
                <strong>
                    Please stay alert, as the matrix is only displayed for {{ Constants.sec_per_matrix }} seconds.
                </strong>
                You have {{ Constants.sec_to_answer }} seconds to fill in your estimate after the matrix disappears.
        </div>

          <div class="card-deck">

              <div class="card">
                  <div class="card-body">

                      <img src = "{% static 'img/matrix_white.png' %}" id="matrix1_white" style="display:block;margin-left:auto; margin-right:auto; width:100%;"/>
                      <img src = "{% static 'img/matrix_30_1.png' %}" id="matrix1" style="display:none;margin-left:auto; margin-right:auto; width:100%;"/>



                      <table style="width:100%;" id="beliefA">
                          <tr>
                              <td>How many Xs were in the matrix?</td>
                              <td><input id="num_x_belief_A" class = "form-control" type="number" name="num_x_belief_A" min="1" max="400"></td>
                          </tr>
                      </table>

                      <p style="margin: 16pt 18pt;">
                          I am certain there are between
                          <input id="num_x_belief_min_A" class = "form-control" type="number" name="num_x_belief_min_A" min="1" max="400" style="display: inline; width: 4em;">
                          and
                          <input id="num_x_belief_max_A" class = "form-control" type="number" name="num_x_belief_max_A" min="1" max="400" style="display: inline; width: 4em;">
                          Xs in the matrix.
                      </p>

                  </div>
              </div>



              <div class="card">
                  <div class="card-body" id="cardB" style="color: #6c757d">

                      <img src = "{% static 'img/matrix_white.png' %}" id="matrix2" style="margin-left:auto; margin-right:auto; width:100%;"/>


                      <table style="width:100%;" id="beliefB">
                          <tr>
                              <td>How many Xs were in the matrix?</td>
                              <td><input id="num_x_belief_B" class = "form-control" type="number" name="num_x_belief_B" min="1" max="400"></td>
                          </tr>
                      </table>

                      <p style="margin: 16pt 18pt;">
                          I am certain there are between
                          <input id="num_x_belief_min_B" class = "form-control" type="number" name="num_x_belief_min_B" min="1" max="400" style="display: inline; width: 4em;">
                          and
                          <input id="num_x_belief_max_B" class = "form-control" type="number" name="num_x_belief_max_B" min="1" max="400" style="display: inline; width: 4em;">
                          Xs in the matrix.
                      </p>

                  </div>
              </div>

          </div>
        </div>

        <br>
        <br>

        <div style="text-align: right">
            {% next_button %}
        </div>

    </body>

{% endblock %}

