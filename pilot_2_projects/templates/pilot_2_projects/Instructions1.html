{% extends "global/Page.html" %}
{% load otree %}

{% block styles %}
    <link href="{% static 'global/css/ecomb.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <style>
        /* Alignment of buttons */
        .next {float: right; margin-top: 40px;}
        .back {float: left; margin-top: 40px;}
        li{margin: 10px 0;}
        .controls ul li{margin: 0;}
        .tab{margin: 10px;}
    </style>
{% endblock %}

{% block scripts %}
    <script src="{% static 'global/js/browser_info.js' %}"></script>
    <script src="{% static 'global/js/backbutton.js' %}"></script>
{% endblock %}


{% block title %}
    Instructions
{% endblock %}



{% block content %}

    <!-- Hidden Tracking Fields -->
    <input type="hidden" name="window_width" id="id_window_width" value="0"/>
    <input type="hidden" name="window_height" id="id_window_height" value="0"/>

{% if player.part == 1 %}
    <div class="progress" style="margin-bottom: 12pt; margin-top: 12pt">
        <div class="progress-bar" role="progressbar" style="width: 20%; background-color: powderblue" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
{% endif %}

<div class="card">
    <div class="card-body">

        {% if player.part == 1 %}
        <!-- Page 1 -->
        <div class="tab">

            <h4><i class="bi bi-map" style="font-weight: 100; font-size: 1.5em; color: Grey; margin-right: 0.5em"></i> The structure of the experiment</h4>
            <div class="alert">
                <ul>
                    <li>This experiment is composed of two parts.</li>
                    <li>Each part consists of multiple rounds of the same task.</li>
                    <li>Your choices in these tasks <b>may affect your final earnings</b>.</li>
                    <li>We randomly select 1 out of 20 participants, at the end of the experiment.</li>
                    <li>If you are among them, we <b>randomly select one of your decisions</b>
                    in the experiment to be the <b>decision-that-counts for your bonus payment</b>.</li>
                </ul>
            </div>

            <div class="alert alert-warning alert-bonus" role="alert">
                Throughout the rest of the instructions, we use yellow boxes to <b>explain how your decisions affect your bonus payment</b>.
            </div>

            <div class="alert">
                <ul>
                    <li>On the next pages, we describe the task in this experiment.</li>
                    <li>Pay close attention to these instructions, we will ask <b>comprehension questions</b> at the end of each section.</li>
                    <li>You will <b>not be admitted to the experiment and forfeit any payments</b>,
                        if you <b>do not answer correctly more than two times</b>.</li>
                </ul>
            </div>

            <p>
                <button type="button" class="btn btn-primary btn-tab next" data-offset="1">Next</button>
            </p>

        </div>

        <!-- Page 2 -->
        <div class="tab">
            <div class="alert alert-primary">
                Before we start, we need to ensure that you understand the instructions.
                <br>
                You may view the instructions again by going back to the previous page (click 'back' below).
            </div>

                {% formfield player.cq_1 %}

                {% formfield player.cq_2 %}

            <p>
                <button type="button" class="btn btn-primary btn-tab back" data-offset="-1">Back</button>
                <button class="btn btn-primary next">Check my answers and continue</button>
            </p>
        </div>

        {% elif player.part == 2 %}

            <div class="tab">
                <p>
                    You have now reached the end of the first part of the experiment.
                </p>
                <p>
                    Your task in the second part is the same as before. You can decide whether to donate to different projects,
                    which finance different quantities of vitamin A doses.
                </p>
                <p>
                    In this part, however, the bonus payments for the estimation of the number of pills are different.
                </p>
                <div class="alert alert-warning alert-bonus" role="alert">
                    If one of your estimates is selected as a decision-that-counts,
                        <ul>
                            <li>you now receive <span style="color:darkred"><b><u>&#36;{{ player.accuracy_bonus }}</u></b></span> if your estimate is <b>at most 10 pills away from the true number</b> of pills.</li>
                            <li>you receive <b>no bonus</b> if your estimate is <b>more than 10 pills away</b> from the true number.</li>
                        </ul>
                </div>


                {% formfield player.cq_6 %}

                <button class="btn btn-primary next">Check my answer and continue</button>
            </div>


        {% endif %}

    </div>
</div>

{% endblock %}